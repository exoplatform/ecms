<?xml version="1.0" encoding="ISO-8859-1"?>

<configuration>
	<component>
		<type>org.exoplatform.services.wcm.newsletter.NewsletterInitializationService</type>
		<init-params>
			<values-param>
        <name>portalNames</name>
        <value>classic</value>
        <value>acme</value>
      </values-param>
			<object-param>
				<name>marketing</name>
				<description>marketing</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
					<field name="name"><string>marketing</string></field>
					<field name="title"><string>Marketing</string></field>
					<field name="description"><string>You want to know where we are, where we go ?</string></field>
					<field name="moderator"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>general</name>
				<description>general</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
					<field name="name"><string>general</string></field>
					<field name="title"><string>General</string></field>
					<field name="description"><string>General information about us</string></field>
					<field name="moderator"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>subscription2</name>
				<description>subscription2</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
					<field name="name"><string>results</string></field>
					<field name="title"><string>Results</string></field>
					<field name="description"><string>Monthly newsletter about our results and forecasts</string></field>
					<field name="categoryName"><string>general</string></field>
					<field name="redactor"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>subscription1</name>
				<description>subscription1</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
					<field name="name"><string>checklist</string></field>
					<field name="title"><string>Check-List</string></field>
					<field name="description"><string>Weekly newsletter with general topics</string></field>
					<field name="categoryName"><string>general</string></field>
					<field name="redactor"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>subscription3</name>
				<description>subscription3</description>
				<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
					<field name="name"><string>market</string></field>
					<field name="title"><string>The market</string></field>
					<field name="description"><string>What's on the market today ?</string></field>
					<field name="categoryName"><string>marketing</string></field>
					<field name="redactor"><string>root</string></field>
				</object>
			</object-param>
			<object-param>
				<name>user1@gmail.com</name>
				<description>user1@gmail.com</description>
				<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
					<field name="mail"><string>user1@gmail.com</string></field>
				</object>
			</object-param>
			<object-param>
				<name>user2@gmail.com</name>
				<description>user2@gmail.com</description>
				<object type="org.exoplatform.services.wcm.newsletter.config.NewsletterUserConfig">
					<field name="mail"><string>user2@gmail.com</string></field>
				</object>
			</object-param>
		</init-params>
	</component>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.portal.artifacts.CreatePortalArtifactsService</target-component>
		<component-plugin>
			<name>Initial newsletter data for each site</name>
			<set-method>addPlugin</set-method>
			<type>org.exoplatform.services.wcm.newsletter.InitialNewsletterPlugin</type>
			<description>This plugin deploy newsletter data of portal when a portal is created</description>
			<init-params>
				<object-param>
					<name>general</name>
					<description>general</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterCategoryConfig">
						<field name="name"><string>general</string></field>
						<field name="title"><string>General</string></field>
						<field name="description"><string>General information about us</string></field>
						<field name="moderator"><string>root</string></field>
					</object>
				</object-param>
				<object-param>
					<name>checklist</name>
					<description>checklist</description>
					<object type="org.exoplatform.services.wcm.newsletter.NewsletterSubscriptionConfig">
						<field name="name"><string>checklist</string></field>
						<field name="title"><string>Check-List</string></field>
						<field name="description"><string>Weekly newsletter with general topics</string></field>
						<field name="categoryName"><string>general</string></field>
					</object>
				</object-param>
			</init-params>
		</component-plugin>
	</external-component-plugins>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.deployment.WCMContentInitializerService</target-component>
		<component-plugin>
			<name>Content Initializer Service</name>
			<set-method>addPlugin</set-method>
			<type>org.exoplatform.services.wcm.deployment.plugins.XMLDeploymentPlugin</type>
			<description>XML Deployment Plugin</description>
			<init-params>
				<object-param>
					<name>Demo newsletter for classic site</name>
					<description>Deployment Descriptor</description>
					<object type="org.exoplatform.services.deployment.DeploymentDescriptor">
						<field name="target">
							<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
								<field name="repository"><string>repository</string></field>
								<field name="workspace"><string>collaboration</string></field>
								<field name="nodePath"><string>/sites content/live/classic/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
							</object>
						</field>
						<field name="sourcePath">
							<string>war:/conf/wcm/artifacts/site-resources/templates/newsletterBasicTemplate.xml</string>
						</field>
					</object>
				</object-param>
				<object-param>
					<name>Demo newsletter for acme site</name>
					<description>Deployment Descriptor</description>
					<object type="org.exoplatform.services.deployment.DeploymentDescriptor">
						<field name="target">
							<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
								<field name="repository"><string>repository</string></field>
								<field name="workspace"><string>collaboration</string></field>
								<field name="nodePath"><string>/sites content/live/acme/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
							</object>
						</field>
						<field name="sourcePath">
							<string>war:/conf/wcm/artifacts/site-resources/templates/newsletterBasicTemplate.xml</string>
						</field>
					</object>
				</object-param>
			</init-params>
		</component-plugin>
	</external-component-plugins>
	
	<external-component-plugins>
		<target-component>org.exoplatform.services.wcm.portal.artifacts.CreatePortalArtifactsService</target-component>    
			<component-plugin> 
				<name>Initial demo newsletter for each site</name>
				<set-method>addPlugin</set-method>
				<type>org.exoplatform.services.wcm.webcontent.InitialWebContentPlugin</type>
				<description>This plugin deploy demo newsletter for portal when a portal is created</description>
        <init-params>
          <object-param>        
            <name>Demo newsletter for new site</name>
            <description>Deployment Descriptor</description>
            <object type="org.exoplatform.services.deployment.DeploymentDescriptor">
              <field  name="target">
              	<object type="org.exoplatform.services.deployment.DeploymentDescriptor$Target">
              		<field  name="repository"><string>repository</string></field>
              		<field  name="workspace"><string>collaboration</string></field>
              		<field  name="nodePath"><string>/sites content/live/{portalName}/ApplicationData/NewsletterApplication/DefaultTemplates</string></field>
              	</object>
              </field>
              <field name="sourcePath">
              	<string>war:/conf/wcm/artifacts/site-resources/templates/newsletterBasicTemplate.xml</string>
              </field>
					</object>
				</object-param>
			</init-params>
		</component-plugin> 
	</external-component-plugins>
</configuration>